<stack:stack>

<stack:copyright>
Copyright (c) 2006 - 2019 Teradata
All rights reserved. Stacki(r) v5.x stacki.com
https://github.com/Teradata/stacki/blob/master/LICENSE.txt
</stack:copyright>


<stack:script stack:stage="install-post">

<stack:file stack:name="/etc/logrotate.d/stack">
size=100M
missingok

/var/log/auth {
	postrotate
		/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` \
			2&gt; /dev/null || true
	endscript
}
/var/log/authpriv {
	postrotate
		/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` \
			2&gt; /dev/null || true
	endscript
}
/var/log/daemon {
	postrotate
		/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` \
			2&gt; /dev/null || true
	endscript
}
/var/log/lpr {
	postrotate
		/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` \
			2&gt; /dev/null || true
	endscript
}
/var/log/mail {
	postrotate
		/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` \
			2&gt; /dev/null || true
	endscript
}
/var/log/kern {
	postrotate
		/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` \
			2&gt; /dev/null || true
	endscript
}
/var/log/syslog {
	postrotate
		/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` \
			2&gt; /dev/null || true
	endscript
}
/var/log/user {
	postrotate
		/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` \
			2&gt; /dev/null || true
	endscript
}
/var/log/local[0-9] {
	postrotate
		/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` \
			2&gt; /dev/null || true
	endscript
}
/var/log/checklist.log {
        postrotate
		/usr/bin/systemctl restart checklist
        endscript
}
</stack:file>
</stack:script>

<stack:script stack:cond="'&release;' == '12.x'" stack:stage="install-post">
<stack:file stack:name="/etc/logrotate.d/stack" stack:mode="append">
/var/log/checklist.log {
	postrotate
		/usr/bin/systemctl restart checklist
	endscript
}
</stack:file>
</stack:script>
<stack:script stack:cond="'&release;' == '11.x'" stack:stage="install-post">
<stack:file stack:name="/etc/logrotate.d/stack" stack:mode="append">
/var/log/checklist.log {
	postrotate
		service restart checklist
	endscript
}
</stack:file>
</stack:script>
</stack:stack> 

